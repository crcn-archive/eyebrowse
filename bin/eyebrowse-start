#!/usr/bin/env node

process.env.APUPPET_LOG=1
var commander = require("commander"),
eyebrowse       = require("..");


commander.
usage("[browser] [args...]").
description("starts a browser").
option("-c, --config [config]", "the configuration path for eyebrowse", eyebrowse.utils.fixPath, require("./defaultConfigPath")).
parse(process.argv);


var config = require(commander.config),
client = new eyebrowse.Client(config);

client.use({
  remote: eyebrowse.Client.plugins.chunnel.client()
});

client.start({ name: commander.args.shift(), args: commander.args }, function(err) {
  if(err) {
    console.error(err.message);
  }
});

