#!/usr/bin/env node

process.env.APUPPET_LOG=1
var commander = require("commander"),
apuppet       = require("..");

commander.
option("-c, --config <path>", "apuppet configuration file", String, "/usr/local/etc/apuppet/config");

function initPuppet() {
  return apuppet(require(commander.config.replace(/^\./, process.cwd()).replace("~", process.env.HOME)));
}



commander.
command("start <appName> [args]").
description("starts an application").
action(function(app) {

  var args  = process.argv.slice(4);

  initPuppet().start({ name: app,  args: args }, function(e) {
    if(e) console.error(e.stack);
  });
});



commander.parse(process.argv);